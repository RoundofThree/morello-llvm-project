; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: %cheri_purecap_llc -frame-pointer=all %s -o - | %cheri_FileCheck %s

; CHECK: cgetdata
; Function Attrs: nounwind readnone
define chericcallcc i8 addrspace(200)* @cgetdata(i8 addrspace(200)* inreg readnone %c.coerce0, i8 addrspace(200)* inreg nocapture readnone %c.coerce1) #0 {
; CHECK-LABEL: cgetdata:
; CHECK:       # %bb.0: # %entry
; CHECK-NEXT:    cincoffset $c11, $c11, -32
; CHECK-NEXT:    csc $c24, $zero, 16($c11) # 16-byte Folded Spill
; CHECK-NEXT:    csc $c17, $zero, 0($c11) # 16-byte Folded Spill
; CHECK-NEXT:    cincoffset $c24, $c11, $zero
; CHECK-NEXT:    daddiu $2, $zero, 0
; CHECK-NEXT:    daddiu $3, $zero, 0
; CHECK-NEXT:    cmove $c3, $c1
; CHECK-NEXT:    cgetnull $c4
; CHECK-NEXT:    cincoffset $c11, $c24, $zero
; CHECK-NEXT:    clc $c17, $zero, 0($c11) # 16-byte Folded Reload
; CHECK-NEXT:    clc $c24, $zero, 16($c11) # 16-byte Folded Reload
; CHECK-NEXT:    cjr $c17
; CHECK-NEXT:    cincoffset $c11, $c11, 32
entry:
; The real return value goes in $c3, check that $v0, $v1 and $c3 are zeroed:
  ret i8 addrspace(200)* %c.coerce0
}

; Function Attrs: nounwind readnone
define chericcallcc i32 @cgetnumber(i8 addrspace(200)* inreg nocapture readnone %c.coerce0, i8 addrspace(200)* inreg nocapture readnone %c.coerce1) #0 {
; CHECK-LABEL: cgetnumber:
; CHECK:       # %bb.0: # %entry
; CHECK-NEXT:    cincoffset $c11, $c11, -32
; CHECK-NEXT:    csc $c24, $zero, 16($c11) # 16-byte Folded Spill
; CHECK-NEXT:    csc $c17, $zero, 0($c11) # 16-byte Folded Spill
; CHECK-NEXT:    cincoffset $c24, $c11, $zero
; CHECK-NEXT:    addiu $2, $zero, 42
; CHECK-NEXT:    daddiu $3, $zero, 0
; CHECK-NEXT:    cgetnull $c3
; CHECK-NEXT:    cgetnull $c4
; CHECK-NEXT:    cincoffset $c11, $c24, $zero
; CHECK-NEXT:    clc $c17, $zero, 0($c11) # 16-byte Folded Reload
; CHECK-NEXT:    clc $c24, $zero, 16($c11) # 16-byte Folded Reload
; CHECK-NEXT:    cjr $c17
; CHECK-NEXT:    cincoffset $c11, $c11, 32
; The real return value goes in $v0, check that $c3, $c4 and $v1 are zeroed:
entry:
  ret i32 42
}

attributes #0 = { nounwind readnone }
