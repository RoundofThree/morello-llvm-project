; NOTE: Assertions have been autogenerated by utils/update_llc_test_checks.py
; RUN: %cheri_llc %s -o - -relocation-model=pic | FileCheck %s

%struct.node = type opaque

@n = common global %struct.node addrspace(200)* addrspace(200)* null, align 32

define void @set(%struct.node addrspace(200)* %h) nounwind {
; CHECK-LABEL: set:
; CHECK:       # %bb.0:
; CHECK-NEXT:    lui $1, %hi(%neg(%gp_rel(set)))
; CHECK-NEXT:    daddu $1, $1, $25
; CHECK-NEXT:    daddiu $1, $1, %lo(%neg(%gp_rel(set)))
; CHECK-NEXT:    ld $1, %got_disp(n)($1)
; CHECK-NEXT:    clc $c1, $1, 0($ddc)
; CHECK-NEXT:    jr $ra
; CHECK-NEXT:    csc $c3, $zero, 0($c1)
  %1 = load %struct.node addrspace(200)* addrspace(200)*, %struct.node addrspace(200)* addrspace(200)** @n, align 32
  store %struct.node addrspace(200)* %h, %struct.node addrspace(200)* addrspace(200)* %1, align 32
  ret void
}
